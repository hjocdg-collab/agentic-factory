datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id        String      @id @default(uuid()) @db.Uuid
  email     String      @unique
  password  String
  firstName String
  lastName  String
  role      UserRole
  createdAt DateTime    @default(now())
  updatedAt DateTime    @updatedAt
  tasks     Task[]      @relation("UserTasks")
  notifications Notification[] @relation("UserNotifications")
}

model Task {
  id          String      @id @default(uuid()) @db.Uuid
  title       String
  description String?     @db.Text
  status      TaskStatus
  priority    TaskPriority
  dueDate     DateTime?
  createdAt   DateTime    @default(now())
  updatedAt   DateTime    @updatedAt
  userId      String      @db.Uuid
  user        User        @relation("UserTasks", fields: [userId], references: [id])
}

model Notification {
  id        String      @id @default(uuid()) @db.Uuid
  message   String
  type      NotificationType
  isRead    Boolean      @default(false)
  createdAt DateTime    @default(now())
  userId    String      @db.Uuid
  user      User        @relation("UserNotifications", fields: [userId], references: [id])
}

enum UserRole {
  USER
  ADMIN
}

enum TaskStatus {
  TODO
  IN_PROGRESS
  DONE
}

enum TaskPriority {
  LOW
  MEDIUM
  HIGH
}

enum NotificationType {
  TASK_ASSIGNED
  TASK_UPDATED
  TASK_COMPLETED
  SYSTEM
}